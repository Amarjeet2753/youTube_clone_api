<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
   <link rel="stylesheet" href="style/style.css">
  
 
  <body>
   

   <div class="logo-search">
      
    <img src="https://s.yimg.com/fz/api/res/1.2/xmgYi4M01WDngH1olFyBvw--~C/YXBwaWQ9c3JjaGRkO2ZpPWZpdDtoPTI0MDtxPTgwO3c9MjQw/https://s.yimg.com/zb/imgv1/576ce588-66b3-3980-8984-71cffd276a9c/t_500x300" alt="img">
    <h1>YouTube</h1>
    <input type="text" id="search" placeholder="Search" />
    <button onclick="searchVideos()"><span class="icon"><i class="fas fa-search"></i></span></button>


   </div>
    
  <hr>
    <div class="nav_div_container">
      <div class="side-nav">
      <h4><a href="">Home</a></h4>
      <h4><a href="">Explore</a></h4>
      <h4><a href="">Suscription</a></h4>
      <h4></h4></div>
      <div id="search_results"></div>
    </div>
  </body>
</html>
<script>


//searchVideos()
   async function searchVideos()
   {

  try
  {
    var name=document.querySelector("#search").value;
    console.log(name)
    var res=await fetch(`https://youtube.googleapis.com/youtube/v3/search?part=snippet&q=${name}&type=video&key=AIzaSyAhr78-0-TCB1OmIVRDUEKSo_J774KgYbY&maxResults=20`);

     var data =await res.json();
    // console.log(data)
     var video=data.items
    console.log(data);
    recomndation(video)
     showThanbNail(video)
  }catch(e)
  {
    console.log(e)
  }
    }
   defaultVideos()

  // popular default video
    async function defaultVideos()
   {

  try{
    var name=document.querySelector("#search").value;
    console.log(name)
    let res= await fetch(`https://youtube.googleapis.com/youtube/v3/search?part=snippet&chart=mostPopular&regionCode=IN&type=video&key=AIzaSyAhr78-0-TCB1OmIVRDUEKSo_J774KgYbY&maxResults=20`)
     var data =await res.json();
    // console.log(data)
     var video=data.items
    //console.log(data)
    recomndation(video)
     showThanbNail(video)
  }catch(e)
  {
console.log(e)
  }
    }


    function showThanbNail(video)
    {
     console.log(video)
      document.querySelector("#search_results").innerHTML=""
      video.map(({snippet,id:{videoId}})=>
      {
          console.log(snippet)
      var maindiv=document.createElement("div");

var thambnail=document.createElement("img");
thambnail.src=snippet.thumbnails.high.url
 //console.log(elem.snippet.thumbnails.high.url)
 var title=document.createElement("H4");
 title.textContent=snippet.title
maindiv.append(thambnail,title);
//console.log(elem);
let data_to_dend=
{
snippet,
videoId
}
maindiv.addEventListener("click",function()
{
  showVideo(data_to_dend)
})
document.querySelector("#search_results").append(maindiv)
      })
      
  }


  // show video
  function showVideo(data)
  {
    localStorage.setItem("clickedVideo", JSON.stringify(data))
    window.location.href="video.html"
  }

  function recomndation(rec)
  {
    localStorage.setItem("recomnded", JSON.stringify(rec))
  }
</script>
<!-- GET https://youtube.googleapis.com/youtube/v3/search?part=snippet&q=tesla&type=video&key=AIzaSyAcsFS0Wag11L_fWGSqLNOf8fqhsmuDpjg HTTP/1.1 -->
<!-- https://youtube.googleapis.com/youtube/v3/search?part=snippet&q=tesla&type=video&key=AIzaSyAcsFS0Wag11L_fWGSqLNOf8fqhsmuDpjg
AIzaSyCiwuayxne6aCkm8TjeOlHmdMUJUT8TzHo -->

<!-- 
AIzaSyAIqcUjEgcwru-0Nko5ue_ZhccTH7OsvC8 -->
<!-- 
let req= await fetch(https://youtube.googleapis.com/youtube/v3/search?part=snippet&chart=mostPopular&regionCode=IN&type=video&key=AIzaSyAIqcUjEgcwru-0Nko5ue_ZhccTH7OsvC8&maxResults=20 -->
<!-- https://www.youtube.com/embed/dh6ob389CYU -->